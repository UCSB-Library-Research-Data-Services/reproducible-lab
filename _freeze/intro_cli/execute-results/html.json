{
  "hash": "b1f5de2ea076bb2540fa4753d440db25",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Using the Command line Interface\"\nexecute: \n  eval: FALSE\nengine: knitr\n---\n\n\n## Short introduction to the command line interface (CLI)\n\nThe CLI provides a direct way to interact with the Operating System, by typing in commands. \n\n### Why the CLI is worth learning\n\n* Might be the only interface you have to a High Performance Computer (HPC)\n* Command statements can be reused easily and saved as scripts\n* Easier automation and text files manipulation\n\n      \n### A little bit of terminology\n\n- `Command Line Interface (CLI)`: This is a user interface that lets you interact with a computer. It is a legacy from the early days of computers. Now a days computers have graphical user interfaces instead (MacOSX, Windows, Linux, ...) \n- `Terminal`: It is a an application that lets you run a command line interface. It used to be a physical machine connected to a mainframe computer\n- `Shell`: It is the program that runs the command line. There are many different shells, the most common (an default on most system) being `bash` (Bourne Again SHell)\n\n::: {.callout-tip}\nNot convinced? Check this out: [the CLI pitch](https://eds-214.github.io/eds214-handson-cli/cli-pitch.html)\n:::\n\n### The Terminal from RStudio\n\nYou can access the command line directly from RStudio by using the `Terminal` tab next to your R console.\n\n![](img/cli-rstudio.png)\n\n### Navigating and managing files/directories in *NIX\n\n\n![](img/unix_filetree.gif)\n\n\n* `pwd`: Know where you are\n* `ls`: List the content of the directory\n* `cd`: Go inside a directory\n\nSome pseudo directory names. Wherever you are:\n\n* `~` : Home directory\n* `.` : Here (current directory)\n* `..`: Up one level (upper directory)\n\nLet's put this into action: \n\n* go to my \"Home\" directory:  `cd ~`\n* go up one directory level: `cd ..`\n* list the content: `ls`\n* list the content showing hidden files: `ls -a`  note that `-a` is referred as an option (modifies the command)\n \nMore files/directories manipulations:\n\n* `mkdir`: Create a directory\n* `cp`: Copy a file\n* `mv`: Move a file  **it is also how you rename a file!**\n* `rm` / `rmdir`: Remove a file / directory  **use those carefully, there is no return / Trash!!**\n\n\n**Note: typing is not your thing? the `<tab>` key is your friend!** One hit it will auto-complete the file/directory/path name for you. If there are many options, hit it twice to see the options.\n\n\n### Permissions\n\nAll files have permissions and ownership.\n\n![File permissions](img/UnixFileLongFormat.png)\n\n* List files showing ownership and permissions: `ls -l`\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nbrun@taylor:/courses/EDS214$ ls -l\ntotal 16\ndrwxrwxr-x+ 3 brun      esmdomainusers 4096 Aug 20 04:49 data\ndrwxrwxr-x+ 2 katherine esmdomainusers 4096 Aug 18 18:32 example\t\n```\n:::\n\n\nYou can change those permissions:\n\n* Change permissions: `chmod`\n* Change ownership: `chown`\n\n\n::: {.callout-tip}\nClear contents in terminal window: `clear`\n:::\n\n\n### General command syntax\n\n* `command [options] [arguments]`\n\nwhere `command` must be an _executable_ file on your `PATH`\n* `echo $PATH`\n\nand `options` can usually take two forms\n* short form: `-a`\n* long form: `--all`\n\nYou can combine the options:\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nls -ltrh\n```\n:::\n\n\nWhat do these options do?\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nman ls\n```\n:::\n\n\n::: {.callout-tip}\nhit `spacebar` to get to the next page of the manual\nhit `q` to exit the help\n:::\n\n\n\n### Unix systems are multi-user\n\n* Who else is logged into this machine?  `who`\n* Who is logged into \"this shell\"?  `whoami`\n\n\n\n### Getting help\n\n* `<command> -h`, `<command> --help`\n* `man`, `info`, `apropos`, `whereis`\n* Search the web!\n\n\n### finding stuff\n\nShow me my Rmarkdown files!\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nfind . -iname '*.Rmd'\n```\n:::\n\n\nWhich files are larger than 1GB?\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nfind . -size +1G\n```\n:::\n\n\nWith more details about the files:\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nfind . -size +1G -ls\n```\n:::\n\n\n\n### Getting things done\n\n#### Some useful, special commands using the Control key\n\n* Cancel (abort) a command: `Ctrl-c`  Note: very different than Windows!!\n* Stop (suspend) a command: `Ctrl-z`\n* `Ctrl-z` can be used to suspend, then background a process\n\n\n#### Process management\n\n* Like Windows Task Manager, OSX Activity Monitor\n* **`top`**, `ps`, `jobs` (hit `q` to get out!)\n* `kill` to delete an unwanted job or process\n* Foreground and background: `&`\n\n\n#### What about \"space\"\n\n* How much storage is available on this system?  `df -h`\n* How much storage am \"I\" using overall?  `du -hs <folder>`\n* How much storage am \"I\" using, by sub directory?  `du -h <folder>`\n\n#### History\n\n* See your command history:  `history`\n* Re-run last command:  `!!`  (pronounced \"bang-bang\")\n* Re-run 32th command: `!32`\n* Re-run 5th from last command: `!-5`\n* Re-run last command that started with 'c': `!c`\n\n\n### A sampling of simple commands for dealing with files\n\n* `wc` count lines, words, and/or characters\n* `diff` compare two files for differences\n* `sort` sort lines in a file\n* `uniq` report or filter out repeated lines in a file\n\n\n### Get into the flow, with pipes \n\n![`stdin`, `stdout`, `stderr`](img/pipe_split.png\n    \"http://www.ucblueash.edu/thomas/Intro_Unix_Text/Images/pipe_split.png\")\n\n\n::: {.cell}\n\n```{.bash .cell-code}\n$ ls *.png | wc -l\n$ ls *.png | wc -l > pngcount.txt\n$ diff <(sort file1.txt) <(sort file2.txt)\n$ ls foo 2>/dev/null\n```\n:::\n\n\n* note use of `*` as character wildcard for zero or more matches (same in Mac and Windows)\n* `?` matches single character; `_` is SQL query equivalent\n\n\n### Text editing\n\n#### Some editors\n\n* `vim`\n* `emacs`\n* `nano`\n\n\n::: {.cell}\n\n```{.bash .cell-code}\n$ nano .bashrc\n```\n:::\n\n\n\n### Connecting to a remote server via `ssh`\n\nFrom the gitbash (MS Windows) or the terminal (Mac) type:\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nssh taylor.bren.ucsb.edu\n```\n:::\n\n\nYou will be prompted for your username and password.\n\n![aurora_ssh](img/aurora-ssh.png)\n\nYou can also directly add your username:\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nssh brun@taylor.bren.ucsb.edu\n```\n:::\n\n\nIn this case, you will be only asked for your password as you already specified which user you want to connect with.\n\n\n\n## Hands-on\n\nLet's practice our new skills! Click [here](https://eds-214.github.io/eds214-handson-cli/cli-handson-files.html){.external target=\"_blank\"}\n\n\n## Aknowledgements\n\nThis section adapted materials from [NCEAS Open Science for Synthesis (OSS)](https://learning.nceas.ucsb.edu/) intensive summer schools and other training. Contributions to this content have been made by Mark Schildhauer, Matt Jones, Jim Regetz and many others; and from EDS-213 [10 bash essentials](https://ucsb-library-research-data-services.github.io/bren-eds213/modules/week05/bash-essentials.html) developed by Greg Jan√©e",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}